<!DOCTYPE html>
<html>
<head>
  <style>
    .error {
        color: red;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}, "legend": {"columns": 2}}, "layer": [{"mark": {"type": "point", "filled": true, "stroke": "black", "strokeWidth": 0.5}, "encoding": {"color": {"type": "quantitative", "field": "spec_ratio", "scale": {"domainMid": 1, "scheme": "Spectral"}, "title": "Specialisation ratios"}, "size": {"type": "quantitative", "field": "all_2020_share", "title": "Share of 2020 participations"}, "tooltip": [{"type": "nominal", "field": "index"}], "x": {"type": "quantitative", "field": "covid_spec", "scale": {"zero": false}, "title": "Covid representation"}, "y": {"type": "quantitative", "field": "related_spec", "scale": {"zero": false}, "title": "Related representation"}}}, {"mark": {"type": "text", "dx": 15}, "encoding": {"text": {"type": "nominal", "field": "index"}, "x": {"type": "quantitative", "field": "covid_spec", "scale": {"zero": false}, "title": "Covid representation"}, "y": {"type": "quantitative", "field": "related_spec", "scale": {"zero": false}, "title": "Related representation"}}}, {"mark": {"type": "rule", "stroke": "grey", "strokeDash": [2, 1]}, "encoding": {"x": {"type": "quantitative", "field": "x", "title": ""}}, "transform": [{"calculate": "1", "as": "x"}]}, {"mark": {"type": "rule", "stroke": "grey", "strokeDash": [2, 1]}, "encoding": {"y": {"type": "quantitative", "field": "y", "title": ""}}, "transform": [{"calculate": "1", "as": "y"}]}], "data": {"name": "data-a17816af51aa328945877ad3625d5584"}, "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-a17816af51aa328945877ad3625d5584": [{"index": "CH", "covid_related_projects": 0.039968015094844406, "country_code": 0.030781176605922334, "related_spec": 1.2984563782774474, "all_2020_share": 0.035586206896551724, "all_covid_share": 0.06639004149377593, "covid_spec": 1.8656116311235484, "spec_ratio": 1.4367919187231366}, {"index": "IE", "covid_related_projects": 0.023520914293418436, "country_code": 0.018415023438174027, "related_spec": 1.2772676815963202, "all_2020_share": 0.018620689655172412, "all_covid_share": 0.012448132780082987, "covid_spec": 0.6685108344859383, "spec_ratio": 0.523391333013639}, {"index": "DK", "covid_related_projects": 0.031149653973176625, "country_code": 0.024684375509265027, "related_spec": 1.2619178460271325, "all_2020_share": 0.025333333333333333, "all_covid_share": 0.06224066390041494, "covid_spec": 2.4568683118584844, "spec_ratio": 1.9469320602711084}, {"index": "CZ", "covid_related_projects": 0.013081300815940724, "country_code": 0.010496850944716585, "related_spec": 1.2462119243986196, "all_2020_share": 0.01167816091954023, "all_covid_share": 0.0, "covid_spec": 0.0, "spec_ratio": 0.0}, {"index": "PL", "covid_related_projects": 0.01955354577095635, "country_code": 0.0160184821265949, "related_spec": 1.2206865554690924, "all_2020_share": 0.015586206896551724, "all_covid_share": 0.012448132780082987, "covid_spec": 0.798663386332758, "spec_ratio": 0.6542739270408717}, {"index": "SE", "covid_related_projects": 0.037759424220932335, "country_code": 0.03129882952922342, "related_spec": 1.2064164950857577, "all_2020_share": 0.027264367816091956, "all_covid_share": 0.06224066390041494, "covid_spec": 2.2828574027555226, "spec_ratio": 1.8922630882904552}, {"index": "PT", "covid_related_projects": 0.02561451511947086, "country_code": 0.022872590277711206, "related_spec": 1.1198781951876957, "all_2020_share": 0.020597701149425288, "all_covid_share": 0.008298755186721992, "covid_spec": 0.4028971547125074, "spec_ratio": 0.35976872881695887}, {"index": "AT", "covid_related_projects": 0.033709911816930525, "country_code": 0.030646970292473902, "related_spec": 1.0999427184881894, "all_2020_share": 0.028413793103448277, "all_covid_share": 0.024896265560165973, "covid_spec": 0.8762035209281713, "spec_ratio": 0.7965901371050165}, {"index": "NO", "covid_related_projects": 0.021025168517938456, "country_code": 0.019383226128051996, "related_spec": 1.0847094482125548, "all_2020_share": 0.01972413793103448, "all_covid_share": 0.004149377593360996, "covid_spec": 0.2103705423207498, "spec_ratio": 0.19394183637600854}, {"index": "FI", "covid_related_projects": 0.023553900690647493, "country_code": 0.022057766231774304, "related_spec": 1.0678280131882982, "all_2020_share": 0.021425287356321838, "all_covid_share": 0.016597510373443983, "covid_spec": 0.7746692073442203, "spec_ratio": 0.7254625255908294}, {"index": "BE", "covid_related_projects": 0.05196117380572462, "country_code": 0.050289022882176446, "related_spec": 1.0332508135516154, "all_2020_share": 0.049379310344827586, "all_covid_share": 0.04564315352697095, "covid_spec": 0.9243376063422888, "spec_ratio": 0.8945917043752843}, {"index": "NL", "covid_related_projects": 0.06663314408229816, "country_code": 0.06700729507175245, "related_spec": 0.9944162648402142, "all_2020_share": 0.06441379310344827, "all_covid_share": 0.0995850622406639, "covid_spec": 1.5460207735434972, "spec_ratio": 1.5547018167406146}, {"index": "GR", "covid_related_projects": 0.03044045018520613, "country_code": 0.03142344967742554, "related_spec": 0.9687176455064515, "all_2020_share": 0.03420689655172414, "all_covid_share": 0.0, "covid_spec": 0.0, "spec_ratio": 0.0}, {"index": "GB", "covid_related_projects": 0.11696279691075998, "country_code": 0.12083361292981969, "related_spec": 0.9679657346560688, "all_2020_share": 0.08055172413793103, "all_covid_share": 0.07883817427385892, "covid_spec": 0.9787273347354061, "spec_ratio": 1.011117749000858}, {"index": "ES", "covid_related_projects": 0.09677743511994824, "country_code": 0.10653105438231544, "related_spec": 0.9084434175657015, "all_2020_share": 0.10381609195402298, "all_covid_share": 0.04979253112033195, "covid_spec": 0.4796224764690965, "spec_ratio": 0.5279607592449848}, {"index": "FR", "covid_related_projects": 0.08419227475688636, "country_code": 0.09464420947688296, "related_spec": 0.8895660413059976, "all_2020_share": 0.09158620689655173, "all_covid_share": 0.12448132780082988, "covid_spec": 1.3591711243313502, "spec_ratio": 1.5279035633328717}, {"index": "IT", "covid_related_projects": 0.08333403576152656, "country_code": 0.09701199229272314, "related_spec": 0.8590075700133564, "all_2020_share": 0.09264367816091953, "all_covid_share": 0.0912863070539419, "covid_spec": 0.9853484756442861, "spec_ratio": 1.1470777558211336}, {"index": "DE", "covid_related_projects": 0.10543648847132465, "country_code": 0.12715089582714226, "related_spec": 0.8292233238738823, "all_2020_share": 0.116, "all_covid_share": 0.15767634854771784, "covid_spec": 1.359278866790671, "spec_ratio": 1.639219288285969}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>